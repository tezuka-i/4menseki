<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ランダムナンバー</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Background color */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">
            ランダムナンバー
        </h1>

        <div class="mb-5">
            <label for="digitsInput" class="block text-gray-700 text-sm font-semibold mb-2">
                桁数を入力してください:
            </label>
            <input
                type="number"
                id="digitsInput"
                min="1"
                value="4"
                class="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
                placeholder="例: 4"
            >
        </div>

        <button
            id="generateButton"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 transition duration-200 ease-in-out transform hover:scale-105 shadow-md"
        >
            数字を生成
        </button>

        <div class="mt-8 p-6 bg-blue-50 border border-blue-200 rounded-xl text-center">
            <!-- Container for displaying individual digit boxes -->
            <div id="randomNumberDisplay" class="flex justify-center flex-wrap">
                <!-- Initial display will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Get references to DOM elements
        const digitsInput = document.getElementById('digitsInput');
        const generateButton = document.getElementById('generateButton');
        const randomNumberDisplay = document.getElementById('randomNumberDisplay');

        // Function to generate random number
        function generateRandomNumber() {
            const digits = parseInt(digitsInput.value, 10); // Convert input digits to integer

            // Validate input
            if (isNaN(digits) || digits < 1 || digits > 15) {
                // Clear existing digit boxes to display error message
                randomNumberDisplay.innerHTML = '';
                const errorMessage = document.createElement('p');
                errorMessage.textContent = "無効な桁数です (1-15)";
                errorMessage.classList.add('text-red-600', 'text-2xl', 'font-bold', 'py-4');
                randomNumberDisplay.appendChild(errorMessage);
                // Temporarily disable flexbox wrapping for error display (keep centering)
                randomNumberDisplay.classList.remove('flex-wrap');
                return;
            } else {
                // Re-enable flexbox wrapping for number display
                randomNumberDisplay.classList.add('flex-wrap');
            }

            randomNumberDisplay.innerHTML = ''; // Clear previous digit boxes

            // Calculate min and max values for the specified number of digits
            // Example: For 3 digits, min is 100 (10^(3-1)), max is 999 (10^3 - 1)
            const min = Math.pow(10, digits - 1);
            const max = Math.pow(10, digits) - 1;

            // Generate a random number (integer between min and max)
            const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;
            const randomNumberStr = randomNumber.toString(); // Convert number to string

            // Adjust font size and box size based on the number of digits
            let digitClasses = [
                'flex', 'items-center', 'justify-center', // Center digit inside the box
                'bg-white', // Set background color of the box to white
                'border', 'border-blue-300', // Border for the box
                'font-extrabold', 'text-blue-800', // Bold and blue text style for the digit
                'select-none' // Disable text selection
            ];

            // Adjust sizing for 6 digits and above to fit on one line
            if (digits >= 6 && digits <= 9) { // 6 to 9 digits
                digitClasses.push('w-10', 'h-12', 'text-3xl');
            } else if (digits >= 10) { // 10 digits or more
                digitClasses.push('w-8', 'h-10', 'text-2xl');
            } else { // Less than 6 digits (default larger size)
                digitClasses.push('w-14', 'h-16', 'text-5xl');
            }

            // Display each digit as an individual box
            for (let i = 0; i < randomNumberStr.length; i++) {
                const digit = randomNumberStr[i];
                const digitSpan = document.createElement('span');
                digitSpan.textContent = digit;
                // Add classes
                digitSpan.classList.add(...digitClasses);

                randomNumberDisplay.appendChild(digitSpan);
            }
        }

        // Execute number generation function when the button is clicked
        generateButton.addEventListener('click', generateRandomNumber);

        // Generate initial number on page load
        window.onload = generateRandomNumber;
    </script>
</body>
</html>
